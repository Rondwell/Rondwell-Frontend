<script lang="ts">
	import { goto } from '$app/navigation';
	import { createEventDispatcher } from 'svelte';
	import { clickOutside } from '$lib/utils/constant';

	export let open: boolean = false;
	const dispatch = createEventDispatcher();
</script>

{#if open}
	<!-- Container -->
	<div
		class="fixed inset-0 z-50 flex items-start justify-center bg-black/50 px-3 pt-[40px] backdrop-blur-sm sm:items-center sm:pt-[0px] lg:inset-y-0 lg:p-0 lg:pr-10"
		on:click={() => dispatch('close')}
	>
		<!-- Panel -->
		<div
			class="flex max-h-[90vh] w-full max-w-lg flex-col rounded-md bg-[#F8F9F9] shadow-lg lg:w-lg lg:max-w-none lg:shadow-none"
			use:clickOutside={() => dispatch('close')}
			on:click|stopPropagation
		>
			<!-- Header -->
			<div class="flex items-center justify-between border-b border-gray-200 px-6 py-4">
				<button aria-label="Close" on:click={() => dispatch('close')}>
					<svg
						width="16"
						height="15"
						viewBox="0 0 16 15"
						fill="none"
						xmlns="http://www.w3.org/2000/svg"
					>
						<rect
							y="12.8203"
							width="9.9258"
							height="1.96151"
							rx="0.980754"
							transform="rotate(-45 0 12.8203)"
							fill="#68696B"
						/>
						<rect
							x="1.38867"
							width="10.0318"
							height="1.96151"
							rx="0.980754"
							transform="rotate(45 1.38867 0)"
							fill="#68696B"
						/>
						<rect
							x="7.10547"
							y="12.8203"
							width="9.9258"
							height="1.96151"
							rx="0.980754"
							transform="rotate(-45 7.10547 12.8203)"
							fill="#68696B"
						/>
						<rect
							x="8.49414"
							width="10.0318"
							height="1.96151"
							rx="0.980754"
							transform="rotate(45 8.49414 0)"
							fill="#68696B"
						/>
					</svg>
				</button>

				<div class="flex gap-2">
					<button
						aria-label="revert"
						class="bg-[#F5F5F5] p-1 text-[#68696B] transition-transform duration-300"
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="h-4 w-4 rotate-90"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
							stroke-width="2"
						>
							<path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
						</svg>
					</button>
					<button
						aria-label="forward"
						class="bg-[#F5F5F5] p-1 text-[#68696B] transition-transform duration-300"
					>
						<svg
							xmlns="http://www.w3.org/2000/svg"
							class="h-4 w-4 -rotate-90"
							fill="none"
							viewBox="0 0 24 24"
							stroke="currentColor"
							stroke-width="2"
						>
							<path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
						</svg>
					</button>
				</div>
			</div>

			<!-- Event Creation buttons -->
			<div class="flex-1 overflow-y-auto overscroll-contain p-6">
				<div class="mb-4 flex w-full flex-wrap gap-4 p-6">
					<div class="relative w-full lg:mb-5">
						<button
							on:click={() => {
								dispatch('close');
								goto('/create-event');
							}}
							class="button-purple-hover flex w-full items-center gap-2 rounded-[12.75px] bg-[#FDFDFD] p-2 text-sm font-medium shadow-sm"
						>
							<div
								class="flex h-[44px] w-[44px] items-center justify-center rounded-sm bg-[#E2E8FC]"
							>
								<svg
									width="48"
									height="48"
									viewBox="0 0 48 48"
									fill="none"
									xmlns="http://www.w3.org/2000/svg"
								>
									<rect width="47.3552" height="47.3552" rx="9.47104" fill="#F2E4F8" />
									<rect
										x="10.2656"
										y="10.2578"
										width="26.8346"
										height="26.0454"
										rx="3.94627"
										fill="#AB46DD"
									/>
									<rect x="22.1055" y="16.5703" width="3.15701" height="14.2066" fill="white" />
									<rect
										x="16.582"
										y="25.25"
										width="3.15701"
										height="14.2066"
										transform="rotate(-90 16.582 25.25)"
										fill="white"
									/>
								</svg>
							</div>
							Create a new event
						</button>
					</div>
					<div class="w-full">
						<button
							on:click={() => dispatch('createdEvent')}
							class="add-event-button flex w-full items-center gap-2 rounded-[12.75px] bg-[#FDFDFD] p-2 text-sm font-medium shadow-sm"
						>
							<div
								class="flex h-[44px] w-[44px] items-center justify-center rounded-sm bg-[#E3F4E1]"
							>
								<svg
									width="48"
									height="48"
									viewBox="0 0 48 48"
									fill="none"
									xmlns="http://www.w3.org/2000/svg"
								>
									<rect width="47.3552" height="47.3552" rx="9.47104" fill="#FBDEEC" />
									<path
										d="M33.6602 17.3027C35.1978 17.3028 36.4305 17.6541 37.3555 18.3584C38.2872 19.053 38.9569 19.9759 39.3633 21.127L39.5078 21.5596C39.8232 22.5795 39.9738 23.6739 39.959 24.8418C39.9352 26.2592 39.6697 27.4704 39.1621 28.4746L39.0576 28.6729C38.4905 29.7055 37.7151 30.4888 36.7324 31.0225C35.7586 31.5559 34.6501 31.8222 33.4072 31.8223C32.2578 31.8223 31.2793 31.62 30.4736 31.2129C29.6691 30.8064 29.0167 30.2512 28.5166 29.5479C28.0171 28.8452 27.6531 28.0407 27.4248 27.1357C27.2051 26.2233 27.099 25.2646 27.1074 24.2598V24.2588C27.1328 22.747 27.4329 21.4737 28.0088 20.4404C28.5485 19.4721 29.2673 18.7264 30.165 18.2041L30.3467 18.1025C31.3288 17.5692 32.434 17.3027 33.6602 17.3027ZM17.8379 12.5762C18.7836 12.5762 19.6502 12.677 20.4365 12.8799C21.2235 13.0745 21.9059 13.3879 22.4824 13.8203L22.6953 13.9854C23.178 14.3854 23.5565 14.8864 23.8311 15.4873C24.1536 16.1664 24.3145 16.9926 24.3145 17.9648C24.3145 19.0972 24.1239 20.0546 23.7422 20.835C23.3607 21.6147 22.814 22.2302 22.1016 22.6797C21.7713 22.8906 21.4101 23.0656 21.0205 23.2109C21.3183 23.426 21.5928 23.7108 21.8438 24.0654L22.1357 24.4941C22.4209 24.9393 22.6867 25.4342 22.9336 25.9785C23.2709 26.6952 23.592 27.425 23.8955 28.167H23.8945C24.1281 28.7224 24.3696 29.2393 24.6172 29.7188L24.8672 30.1855V30.1865C24.9303 30.3044 24.9935 30.4222 25.0566 30.54C25.1197 30.6577 25.1821 30.7759 25.2451 30.8936C25.3715 31.121 25.4986 31.3487 25.625 31.5762L25.6494 31.6201H22.2461L22.2373 31.6064C22.127 31.4367 22.0335 31.2624 21.957 31.084C21.9193 30.9959 21.867 30.8793 21.7998 30.7344L21.5527 30.2129C21.2911 29.6474 21.0343 29.0102 20.7812 28.3018C20.5288 27.5864 20.2502 26.892 19.9473 26.2188V26.2178C19.69 25.6297 19.3976 25.1226 19.0703 24.6963L18.9277 24.5186C18.5931 24.1111 18.2091 23.8537 17.7754 23.7451C17.5647 23.7539 17.3333 23.7633 17.0811 23.7705H17.0801C16.4958 23.7789 15.7051 23.7821 14.708 23.7822V31.6201H11.666V12.7783H13.0098C13.607 12.7783 14.314 12.7441 15.1309 12.6768C15.9491 12.6093 16.8515 12.5762 17.8379 12.5762ZM33.584 19.4482C32.4468 19.4232 31.5927 19.8322 31.0176 20.6738C30.4408 21.518 30.1504 22.7251 30.1504 24.2979C30.1504 25.2728 30.2679 26.1672 30.5029 26.9814C30.7377 27.7949 31.1019 28.4475 31.5947 28.9404C32.0859 29.4316 32.7149 29.6864 33.4834 29.7031C34.6287 29.7198 35.4863 29.2895 36.0615 28.4141C36.6469 27.5275 36.9414 26.2999 36.9414 24.7275C36.9414 23.7524 36.8239 22.87 36.5889 22.0811C36.3541 21.2846 35.9855 20.6489 35.4844 20.1729C34.9935 19.6987 34.3609 19.4567 33.584 19.4482ZM17.4082 14.8096C16.9206 14.8096 16.4372 14.8301 15.958 14.8721H15.957C15.496 14.905 15.0797 14.9582 14.708 15.0312V21.6035C14.8835 21.627 15.1433 21.648 15.4883 21.6641L16.6123 21.6768H17.5098C18.7185 21.6767 19.6458 21.3831 20.2959 20.7998L20.4141 20.6855C20.9849 20.0953 21.2725 19.2316 21.2725 18.0908C21.2724 17.4595 21.1794 16.9196 20.9941 16.4707L20.9082 16.2842C20.6974 15.8554 20.3629 15.5211 19.9023 15.2822L19.6973 15.1855C19.138 14.9351 18.3752 14.8096 17.4082 14.8096Z"
										fill="url(#paint0_linear_1_8107)"
										stroke="url(#paint1_linear_1_8107)"
										stroke-width="0.05925"
									/>
									<circle
										cx="23.2984"
										cy="23.2984"
										r="17.38"
										stroke="url(#paint2_linear_1_8107)"
										stroke-width="0.79"
									/>
									<defs>
										<linearGradient
											id="paint0_linear_1_8107"
											x1="9.47035"
											y1="22.5059"
											x2="45.0204"
											y2="22.5059"
											gradientUnits="userSpaceOnUse"
										>
											<stop stop-color="#DB3EC6" />
											<stop offset="1" stop-color="#513BE2" />
										</linearGradient>
										<linearGradient
											id="paint1_linear_1_8107"
											x1="9.47035"
											y1="22.5059"
											x2="45.0204"
											y2="22.5059"
											gradientUnits="userSpaceOnUse"
										>
											<stop stop-color="#DB3EC6" />
											<stop offset="1" stop-color="#513BE2" />
										</linearGradient>
										<linearGradient
											id="paint2_linear_1_8107"
											x1="23.2984"
											y1="5.52344"
											x2="23.2984"
											y2="41.0734"
											gradientUnits="userSpaceOnUse"
										>
											<stop stop-color="#DB3EC6" />
											<stop offset="1" stop-color="#513BE2" />
										</linearGradient>
									</defs>
								</svg>
							</div>
							Add an already created event
						</button>
					</div>

					<button
						on:click={() => dispatch('externalEvent')}
						class="add-external-button flex w-full items-center gap-2 rounded-[12.75px] bg-[#FDFDFD] p-2 text-sm font-medium shadow-sm"
					>
						<div class="flex h-[44px] w-[44px] items-center justify-center rounded-sm bg-[#F8EFDD]">
							<svg
								width="48"
								height="48"
								viewBox="0 0 48 48"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<rect width="47.3552" height="47.3552" rx="9.47104" fill="#E0E7FC" />
								<path
									d="M23.6836 10.2578C31.0935 10.2581 37.1006 16.2658 37.1006 23.6758C37.1003 31.0856 31.0934 37.0925 23.6836 37.0928C16.2736 37.0928 10.2659 31.0857 10.2656 23.6758C10.2656 16.2656 16.2734 10.2578 23.6836 10.2578Z"
									stroke="#146AEB"
									stroke-width="1.57851"
								/>
								<path
									d="M34.8967 22.6396L34.6687 22.5833C34.4304 22.5254 34.271 20.6581 34.0156 20.5505C33.7603 20.4429 33.7294 19.534 33.5529 19.534C33.3763 19.534 33.3146 19.7492 33.1072 20.3518C32.8998 20.9544 33.1072 21.105 33.1072 21.3831C33.1072 21.6613 33.0592 22.1827 32.8844 21.9973C32.7096 21.8119 31.9434 19.688 31.64 19.6433C31.3366 19.5986 31.0675 18.9811 30.8447 18.8884C30.6219 18.7957 30.4762 18.9348 30.0786 18.9348C29.6809 18.9348 29.6483 18.6252 29.4718 18.6418C29.2952 18.6583 29.0741 18.5507 28.7725 18.5193C28.4708 18.4878 28.2223 17.9581 28.0303 18.2114C27.8383 18.4646 28.2566 18.9215 28.6388 19.1235C29.021 19.3255 29.153 19.0821 29.4169 19.1599C29.6809 19.2377 29.8146 19.6698 29.6723 20.0555C29.5301 20.4412 29.1444 20.6432 28.7005 20.8286C28.2566 21.014 27.9532 21.1597 27.8589 20.5919C27.7646 20.024 26.5323 19.0126 26.3883 18.8272C26.2443 18.6418 26.2409 18.2743 26.0455 18.3206C25.7798 18.3752 25.6187 18.5474 25.6667 18.6236C25.7147 18.6997 26.3523 19.7923 26.971 20.1797C27.4681 20.4859 27.6412 21.2292 27.8469 21.4891C27.9977 21.6811 28.3937 21.6 28.757 21.5023C28.8028 21.4899 28.851 21.4889 28.8973 21.4993C28.9436 21.5098 28.9863 21.5314 29.0216 21.5622C29.0568 21.5929 29.0835 21.6318 29.0989 21.6752C29.1144 21.7186 29.1183 21.765 29.1101 21.8102C28.8565 23.0237 27.2453 23.8398 27.0739 24.4904C26.8836 25.2138 27.3293 26.0912 27.2333 26.462C27.1373 26.8328 26.1963 26.8758 26.1175 27.2318C26.0386 27.5877 26.6728 27.8641 26.1946 28.1091C25.9203 28.2465 25.9461 27.8459 25.7987 28.3392C25.5416 29.2034 24.3332 29.6172 23.9012 29.7232C23.4693 29.8291 23.1385 29.6785 23.2482 29.3921C23.3579 29.1057 22.9465 28.0363 22.4358 27.682C21.925 27.3278 21.9215 26.8543 22.2644 25.6806C22.6072 24.5069 20.9103 24.651 21.3251 23.6643C21.7399 22.6777 20.9737 22.7555 20.4955 22.34C20.0173 21.9245 18.7283 23.9673 17.2886 21.9311C15.8488 19.8949 18.0222 18.5143 18.3564 18.2991C18.6906 18.0839 19.2974 17.329 19.4568 17.3737C19.6162 17.4184 20.6343 17.1751 20.9994 17.0509C21.3645 16.9267 21.9713 16.8672 22.0672 17.0509C22.1632 17.2347 21.6696 17.1602 21.9387 17.483C22.2078 17.8058 24.6811 18.021 25.1748 17.9796C25.6684 17.9382 25.7815 18.0408 25.9701 17.5475C26.1586 17.0542 25.125 17.1022 24.8405 17.1469C24.556 17.1916 24.5543 16.5675 24.1549 17.0112C23.9835 17.2115 23.6407 16.7844 23.6133 16.4583C23.5859 16.1321 22.6569 15.7315 22.4957 15.9782C22.3346 16.2249 23.2225 16.3606 23.2448 16.4748C23.2585 16.5294 23.0854 16.7513 22.9894 16.9218C22.8934 17.0923 22.8625 16.9218 22.8797 16.7678C22.8968 16.6139 22.4238 16.5195 22.2506 16.3209C22.0775 16.1222 21.6422 16.0113 21.2411 16.1371C20.84 16.2629 20.828 16.3159 20.4458 16.7C20.0636 17.084 19.3437 16.983 19.246 16.9218C19.1483 16.8605 19.3437 16.4252 19.3899 16.1702C19.4362 15.9153 19.9333 16.0759 20.2024 16.152C20.4715 16.2282 20.4578 16.0444 20.4115 15.768C20.3652 15.4915 20.4749 15.3607 20.6343 15.3293C20.7937 15.2978 21.5873 15.1968 21.9404 14.8426C22.2146 14.5694 22.6586 14.7664 22.8814 14.7664C23.1042 14.7664 23.8173 14.6754 23.9321 13.9387C23.9612 13.755 24.0126 13.5679 23.6973 13.7732C23.4644 13.8887 23.2824 14.0815 23.1848 14.3161C23.0888 14.5463 22.3106 14.4585 22.0295 14.3046C21.7484 14.1506 22.1101 13.9933 22.9105 13.4537C23.711 12.914 24.8405 13.7268 25.1199 13.6871C25.3993 13.6474 26.1946 12.8594 26.1946 12.8594C28.5318 13.3871 30.6346 14.6192 32.1989 16.3773C33.7632 18.1355 34.708 20.3286 34.8967 22.6396Z"
									fill="#146AEB"
									stroke="#146AEB"
									stroke-width="1.57851"
									stroke-miterlimit="10"
								/>
								<path
									d="M19.9961 14.8122C20.0218 14.8122 20.4469 14.6152 20.4795 14.6947C20.5121 14.7741 20.3338 15.0258 20.2378 15.0572C20.1418 15.0887 19.7922 15.1565 19.7853 15.1002C19.7785 15.044 19.9961 14.8122 19.9961 14.8122Z"
									stroke="#3532E9"
									stroke-width="1.57851"
									stroke-miterlimit="10"
								/>
								<path
									d="M20.8926 14.3272C20.8926 14.3272 21.0194 14.2047 21.1017 14.2411C21.184 14.2776 21.4205 14.7378 21.4205 14.7378C21.4205 14.7378 20.848 15.0689 20.7041 15.0374C20.5601 15.0059 20.9492 14.554 20.8926 14.3272Z"
									stroke="#3532E9"
									stroke-width="1.57851"
									stroke-miterlimit="10"
								/>
								<path
									d="M33.308 21.7776C33.2775 21.9513 33.2775 22.1287 33.308 22.3024C33.3406 22.3918 33.4794 22.261 33.5085 22.2113C33.5377 22.1617 33.3303 21.766 33.308 21.7776Z"
									stroke="#3532E9"
									stroke-width="1.57851"
									stroke-miterlimit="10"
								/>
								<path
									d="M27.9032 26.6363C27.8862 26.646 27.8715 26.6592 27.8603 26.6749C27.849 26.6906 27.8414 26.7085 27.838 26.7273C27.8123 26.9061 27.8689 27.1528 27.79 27.2819C27.7112 27.411 27.4352 27.9656 27.5586 28.1096C27.6821 28.2536 28.0197 28.348 28.1157 28.194C28.2117 28.0401 29.163 25.9062 28.8322 25.9062C28.6111 25.9062 28.7979 26.1628 28.4894 26.3151C28.2665 26.4261 28.0111 26.5684 27.9032 26.6363Z"
									stroke="#3532E9"
									stroke-width="1.57851"
									stroke-miterlimit="10"
								/>
								<path
									d="M14.6387 30.159C13.1203 28.252 12.2982 25.9132 12.3008 23.5075C12.3007 22.785 12.3741 22.0641 12.5202 21.3555C12.5202 21.3555 12.5288 21.3555 12.5288 21.3555C12.5288 21.6568 12.5562 23.5324 12.9898 23.7161C13.4595 23.9131 14.3062 24.2409 14.361 24.7789C14.4159 25.3169 14.0936 26.0155 14.1896 26.3168C14.2856 26.6181 14.4296 27.6593 14.361 27.8067C14.2925 27.954 14.0302 27.9126 14.1502 28.2636C14.2702 28.6145 14.6644 29.4521 14.6644 29.674C14.6711 29.8361 14.6625 29.9984 14.6387 30.159Z"
									stroke="#3532E9"
									stroke-width="1.57851"
									stroke-miterlimit="10"
								/>
								<path
									d="M27.8144 33.6611C25.7329 34.4604 23.4531 34.6476 21.2617 34.1991C21.4409 34.0263 21.6706 33.9107 21.9199 33.868C22.321 33.8084 24.2441 33.8084 24.5835 33.7505C24.9229 33.6925 25.905 33.4045 26.1638 33.5187C26.3926 33.6516 26.6586 33.7123 26.9248 33.6925C27.2042 33.6611 27.7201 33.6975 27.8144 33.6611Z"
									stroke="#3532E9"
									stroke-width="1.57851"
									stroke-miterlimit="10"
								/>
							</svg>
						</div>
						<div class="truncate">Add Event from External Platform</div>
					</button>
				</div>
			</div>
		</div>
	</div>
{/if}

<style>
	/* optional fade transition */
	:global(.fade-enter-active),
	:global(.fade-leave-active) {
		transition: opacity 0.2s ease;
	}
	:global(.fade-enter-from),
	:global(.fade-leave-to) {
		opacity: 0;
	}

	/* Global or component-level style */
	.button-purple-hover {
		transition:
			background 0.4s ease,
			color 0.4s ease,
			transform 0.2s ease;
	}

	.button-purple-hover:hover {
		background: linear-gradient(
			90deg,
			#fdfdfd 12.62%,
			#fceefe 36.3%,
			#fceefe 53.41%,
			#fdfdfd 87.5%,
			#fdfdfd 93.75%,
			#fdfdfd 100%
		);
	}

	.add-event-button {
		border: 1.18px solid;

		border-image-source: linear-gradient(
			90deg,
			#eff0f0 12.75%,
			#f68ed4 27.87%,
			#e10b9b 37.63%,
			#e10b9b 45.46%,
			#f68ed4 56.44%,
			#eff0f0 75%,
			#eff0f0 87.5%,
			#eff0f0 100%
		);
		transition:
			background 0.4s ease,
			color 0.4s ease,
			transform 0.2s ease;
	}

	.add-event-button:hover {
		background: linear-gradient(
			90deg,
			#fdfdfd 12.62%,
			#fee9f7 36.3%,
			#fee9f7 53.41%,
			#fdfdfd 87.5%,
			#fdfdfd 93.75%,
			#fdfdfd 100%
		);
	}

	.add-external-button {
		transition:
			background 0.4s ease,
			color 0.4s ease;
	}
	.add-external-button:hover {
		background: linear-gradient(
			90deg,
			#fdfdfd 12.62%,
			#e3effe 36.3%,
			#e3effe 53.41%,
			#fdfdfd 87.5%,
			#fdfdfd 93.75%,
			#fdfdfd 100%
		);
	}
</style>
